
```{r}
library(tidyverse)
set.seed(123)
N <- 100
p <- rbeta(N, 1, 1)
X <- rnorm(N)
beta <- c(-0.8, 1.5)
X2 <- p * X
sig <- 0.3
Y <- rnorm(N, beta[1] + beta[2] * X2, sig) 

dat <- tibble(Y, X, X2, 
              hold = sample(c(rep(1, 10), numeric(N - 10)), N))
```

```{r}
plot(Y ~ X)
plot(Y ~ X2)
```

```{r}

loglik <- dnorm(Y, mean = beta[1] + beta[2] * p * X, sd = sig, log = TRUE) %>% sum

p2 <- rbeta(N, 1, 1)
loglik2 <- dnorm(Y, mean = beta[1] + beta[2] * p2 * X, sd = sig, log = TRUE) %>% sum

loglik
loglik2

```
