BootStrap: docker
From: mattocci/myenv:4.1.1
#Registry: 210.72.93.96:5000

%apprun R
  exec R "${@}"

%apprun Rscript
  exec Rscript "${@}"

%runscript
  exec R "${@}"

%post
    DEBIAN_FRONTEND=noninteractive

    install2.r -n -2 --skipinstalled --error \
        --deps TRUE \
          pbmcapply

    wget -O - https://github.com/lierdakil/pandoc-crossref/releases/download/v0.3.9.1/pandoc-crossref-Linux.tar.xz | \
      tar Jxf -
      mv pandoc-crossref /usr/local/bin/
      rm -rf pandoc-crossref.1

      Rscript -e "tinytex::tlmgr_install(c('pdfcrop', \
          'ae', \
          'amsfonts', \
          'amsmath', \
          'atbegshi', \
          'atveryend', \
          'auxhook', \
          'babel', \
          'bibtex', \
          'bibtex.x86_64-linux', \
          'bigintcalc', \
          'bitset', \
          'booktabs', \
          'cm', \
          'colortbl', \
          'context', \
          'context.x86_64-linux', \
          'dehyph', \
          'dvipdfmx', \
          'dvipdfmx.x86_64-linux', \
          'dvips', \
          'dvips.x86_64-linux', \
          'environ', \
          'epstopdf-pkg', \
          'etex', \
          'etexcmds', \
          'etoolbox', \
          'everyshi', \
          'firstaid', \
          'float', \
          'geometry', \
          'gettitlestring', \
          'glyphlist', \
          'graphics', \
          'graphics-cfg', \
          'graphics-def', \
          'helvetic', \
          'hycolor', \
          'hyperref', \
          'hyph-utf8', \
          'iftex', \
          'inconsolata', \
          'infwarerr', \
          'intcalc', \
          'knuth-lib', \
          'kvdefinekeys', \
          'kvoptions', \
          'kvsetkeys', \
          'l3backend', \
          'l3kernel', \
          'l3packages', \
          'latex', \
          'latex-amsmath-dev', \
          'latex-bin', \
          'latex-bin.x86_64-linux', \
          'latex-fonts', \
          'latexconfig', \
          'letltxmacro', \
          'lineno', \
          'listings', \
          'lm', \
          'lm-math', \
          'ltxcmds', \
          'lua-alt-getopt', \
          'luahbtex', \
          'luahbtex.x86_64-linux', \
          'lualibs', \
          'luaotfload', \
          'luaotfload.x86_64-linux', \
          'luatex', \
          'luatex.x86_64-linux', \
          'makecell', \
          'makeindex', \
          'makeindex.x86_64-linux', \
          'manfnt-font', \
          'mdwtools', \
          'metafont', \
          'metafont.x86_64-linux', \
          'metapost', \
          'metapost.x86_64-linux', \
          'mflogo-font', \
          'mfware', \
          'mfware.x86_64-linux', \
          'modes', \
          'mptopdf', \
          'mptopdf.x86_64-linux', \
          'multirow', \
          'parskip', \
          'pdfcrop', \
          'pdfcrop.x86_64-linux', \
          'pdfescape', \
          'pdflscape', \
          'pdftex', \
          'pdftex.x86_64-linux', \
          'pdftexcmds', \
          'plain', \
          'psnfss', \
          'refcount', \
          'rerunfilecheck', \
          'setspace', \
          'stmaryrd', \
          'stringenc', \
          'symbol', \
          'tabu', \
          'tex', \
          'tex-ini-files', \
          'tex.x86_64-linux', \
          'threeparttable', \
          'threeparttablex', \
          'times', \
          'tools', \
          'trimspaces', \
          'ulem', \
          'unicode-data', \
          'uniquecounter', \
          'url', \
          'varwidth', \
          'wrapfig', \
          'xcolor', \
          'xetex', \
          'xetex.x86_64-linux', \
          'xetexconfig', \
          'xkeyval', \
          'zapfding'))"